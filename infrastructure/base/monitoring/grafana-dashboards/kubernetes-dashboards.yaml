---
# GrafanaDashboard CRDs for Kubernetes cluster monitoring
# Migrated from scripts/import-grafana-dashboards.sh

# Kubernetes Cluster Monitoring (classic)
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaDashboard
metadata:
  name: k8s-cluster-monitoring
  namespace: monitoring
  labels:
    app.kubernetes.io/component: dashboard
    dashboard-category: kubernetes
spec:
  folder: "Kubernetes"
  instanceSelector:
    matchLabels:
      dashboards: "grafana"
  grafanaCom:
    id: 315
  datasources:
    - inputName: "DS_PROMETHEUS"
      datasourceName: "Mimir"
---
# REMOVED: k8s-comprehensive (ID 15661)
# Reason: Requires VictoriaMetrics datasource, not compatible with Mimir setup.
---
# Kubernetes / Views / Pods
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaDashboard
metadata:
  name: k8s-pods-view
  namespace: monitoring
  labels:
    app.kubernetes.io/component: dashboard
    dashboard-category: kubernetes
spec:
  folder: "Kubernetes"
  instanceSelector:
    matchLabels:
      dashboards: "grafana"
  grafanaCom:
    id: 15760
  datasources:
    - inputName: "DS_PROMETHEUS"
      datasourceName: "Mimir"
---
# REMOVED: k8s-monitoring-overview (ID 14623)
# Reason: Uses Docker-specific queries (name=~"^k8s_.*", mountpoint="/")
# that don't work with containerd/Talos. Use kube-prometheus-stack dashboards instead.
---
# Kubernetes PVC Dashboard
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaDashboard
metadata:
  name: k8s-pvc
  namespace: monitoring
  labels:
    app.kubernetes.io/component: dashboard
    dashboard-category: kubernetes
spec:
  folder: "Kubernetes"
  instanceSelector:
    matchLabels:
      dashboards: "grafana"
  grafanaCom:
    id: 13646
  datasources:
    - inputName: "DS_PROMETHEUS"
      datasourceName: "Mimir"
---
# Kubernetes Volumes Dashboard
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaDashboard
metadata:
  name: k8s-volumes
  namespace: monitoring
  labels:
    app.kubernetes.io/component: dashboard
    dashboard-category: kubernetes
spec:
  folder: "Kubernetes"
  instanceSelector:
    matchLabels:
      dashboards: "grafana"
  grafanaCom:
    id: 11454
  datasources:
    - inputName: "DS_PROMETHEUS"
      datasourceName: "Mimir"
