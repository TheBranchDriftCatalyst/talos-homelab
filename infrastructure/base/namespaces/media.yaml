---
apiVersion: v1
kind: Namespace
metadata:
  name: media
  labels:
    app.kubernetes.io/part-of: media-stack
    # Plex requires hostNetwork for DLNA discovery
    pod-security.kubernetes.io/enforce: privileged
    pod-security.kubernetes.io/audit: privileged
    pod-security.kubernetes.io/warn: privileged
    # Enable Goldilocks resource recommendations
    goldilocks.fairwinds.com/enabled: 'true'
---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: media-quota
  namespace: media
spec:
  hard:
    requests.cpu: '16'
    requests.memory: 32Gi
    limits.cpu: '32'
    limits.memory: 64Gi
    persistentvolumeclaims: '50'
    services.loadbalancers: '0'
---
apiVersion: v1
kind: LimitRange
metadata:
  name: media-limits
  namespace: media
spec:
  limits:
    - max:
        cpu: '12'
        memory: 24Gi
      min:
        cpu: 10m
        memory: 64Mi
      default:
        cpu: '1'
        memory: 1Gi
      defaultRequest:
        cpu: 200m
        memory: 512Mi
      type: Container
    - max:
        cpu: '24'
        memory: 32Gi
      min:
        cpu: 10m
        memory: 64Mi
      type: Pod
