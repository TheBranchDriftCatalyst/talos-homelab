# VPN Rotator QA Checklist
# Run each command and mark status

## Rotation Commands
- [x] rotate:dry-run - Creates job, runs with DRY_RUN=true (WORKS)
- [x] rotate:live - Creates job, actually rotates VPNs (WORKS - 4/4 pods rotated)

## Inspect Commands
- [x] inspect:pods - Lists rotation-enabled pods (WORKS)
- [x] inspect:secrets - Lists ProtonVPN server keys (WORKS)
- [x] inspect:state - Shows rotation state JSON (WORKS)
- [x] inspect:metrics - Shows Prometheus metrics (WORKS)
- [x] inspect:vpn-status - Shows current VPN exit per pod (WORKS - uses xargs)

## Service Commands
- [x] port-forward:metrics - Forwards exporter to localhost:9091 (WORKS)
- [x] logs:exporter - Streams exporter logs (WORKS)

## Issues Fixed
1. ~~inspect:vpn-status - for loop doesn't work in Tilt cmd context~~ FIXED with xargs
2. ~~rotate:live - gluetun API returns 401 Unauthorized~~ FIXED:
   - Added HTTP_CONTROL_SERVER_AUTH=false to all gluetun sidecars
   - Added HTTP_CONTROL_SERVER_AUTH_DEFAULT_ROLE='{"auth":"none"}' for PUT endpoints
   - Gluetun >= v3.40 requires DEFAULT_ROLE for write operations
