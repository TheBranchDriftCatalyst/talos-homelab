---
# Kustomization for Memex - Meme Extraction Discourse Management System
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: memex

labels:
  - pairs:
      app.kubernetes.io/part-of: memex
    includeSelectors: false

resources:
  # PostgreSQL for Dagster metadata
  - k8s/postgres/cluster.yaml

  # Neo4j knowledge graph
  - k8s/neo4j/helmrepository.yaml
  - k8s/neo4j/helmrelease.yaml

  # Secrets
  - k8s/secrets/externalsecret.yaml

  # Storage - MinIO bucket
  - k8s/storage/minio-bucket-job.yaml

  # Network - Ingress routes
  - k8s/network/ingressroute.yaml

  # Dagster Helm charts
  - k8s/helm/dagster-helmrepository.yaml
  - k8s/helm/dagster-helmrelease.yaml
  - k8s/helm/user-deployments-helmrelease.yaml

  # MCP gRPC service
  - k8s/mcp/deployment.yaml

  # GraphQL Apollo service
  - k8s/graphql/deployment.yaml
