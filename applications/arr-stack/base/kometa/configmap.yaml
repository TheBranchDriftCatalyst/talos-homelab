---
# Kometa base configuration
# Secrets (TMDB key, Plex token) injected via environment variables
apiVersion: v1
kind: ConfigMap
metadata:
  name: kometa-config
  labels:
    app: kometa
data:
  config.yml: |
    libraries:
      Movies:
        # Hide collections from library view - only show in Collections tab
        collection_mode: hide
        collection_files:
          # ═══════════════════════════════════════════════════════════
          # CHARTS & RANKINGS
          # ═══════════════════════════════════════════════════════════
          - default: basic
          - default: imdb
          - default: trakt
          - default: flixpatrol     # Streaming top 10s

          # ═══════════════════════════════════════════════════════════
          # STREAMING SERVICES
          # ═══════════════════════════════════════════════════════════
          - default: streaming

          # ═══════════════════════════════════════════════════════════
          # AWARDS - The Prestige
          # ═══════════════════════════════════════════════════════════
          - default: oscars
          - default: golden_globes
          - default: bafta
          - default: cannes
          - default: sundance
          - default: spirit_awards
          - default: berlinale

          # ═══════════════════════════════════════════════════════════
          # STUDIOS - Curated by Studio
          # ═══════════════════════════════════════════════════════════
          - default: studio
            template_variables:
              include:
                - A24
                - Studio Ghibli
                - Pixar
                - Marvel Studios
                - Lucasfilm
                - Blumhouse Productions
                - Legendary Pictures
                - LAIKA Entertainment
                - Aardman Animations

          # ═══════════════════════════════════════════════════════════
          # DIRECTORS - Auteur Spotlights
          # ═══════════════════════════════════════════════════════════
          - default: director
            template_variables:
              include:
                - Christopher Nolan
                - Denis Villeneuve
                - Quentin Tarantino
                - David Fincher
                - Wes Anderson
                - Martin Scorsese
                - Steven Spielberg
                - Ridley Scott
                - The Coen Brothers
                - Guillermo del Toro
                - Edgar Wright
                - Bong Joon-ho
                - Jordan Peele
                - Ari Aster
                - Robert Eggers
                - Greta Gerwig
                - Taika Waititi

          # ═══════════════════════════════════════════════════════════
          # CONTENT ORGANIZATION
          # ═══════════════════════════════════════════════════════════
          - default: genre
          - default: decade
          - default: franchise
          - default: universe    # MCU, DCEU, etc.
          - default: resolution  # 4K Collection

          # ═══════════════════════════════════════════════════════════
          # SEASONAL / HOLIDAY
          # ═══════════════════════════════════════════════════════════
          - default: seasonal
            template_variables:
              # Schedule collections to appear during their seasons
              schedule_christmas: range(11/15-01/05)
              schedule_halloween: range(10/01-10/31)
              schedule_valentine: range(02/01-02/14)
              schedule_patrick: range(03/01-03/17)
              schedule_mother: range(05/01-05/15)
              schedule_father: range(06/01-06/20)
              schedule_labor: range(08/25-09/05)
              schedule_memorial: range(05/20-05/31)
              schedule_independence: range(06/25-07/10)
              schedule_thanksgiving: range(11/01-11/30)
              schedule_easter: range(03/15-04/30)
              schedule_new_year: range(12/26-01/05)

          # ═══════════════════════════════════════════════════════════
          # CURATED MOOD COLLECTIONS (Trakt Lists)
          # ═══════════════════════════════════════════════════════════
          - default: trakt_popular     # Popular right now
          - default: trakt_trending    # Trending today
          - default: trakt_recommended # Personalized recs

        overlay_files:
          # ╔════════════════════════════════════════╗
          # ║  SYNTHWAVE OVERLAY LAYOUT              ║
          # ║  ┌──────────────────────────────┐      ║
          # ║  │ [STINGER]          [IMDB 8.5]│      ║
          # ║  │                              │      ║
          # ║  │                              │      ║
          # ║  │ [4K HDR]           [RIBBON]  │      ║
          # ║  │ [ATMOS]                      │      ║
          # ║  └──────────────────────────────┘      ║
          # ╚════════════════════════════════════════╝

          # TOP RIGHT - IMDb Rating (Primary Focus)
          - default: ratings
            template_variables:
              rating1: user
              rating1_image: imdb
              horizontal_align: right
              vertical_align: top
              horizontal_offset: 15
              vertical_offset: 15
              back_color: "#1a1a2e"         # Dark synthwave base
              back_width: 105
              back_height: 40
              back_radius: 8
              font_color: "#00FFFF"          # Neon cyan

          # TOP LEFT - Mediastinger (Post-credits scenes)
          - default: mediastinger
            template_variables:
              horizontal_align: left
              vertical_align: top
              horizontal_offset: 15
              vertical_offset: 15
              back_color: "#1a1a2eCC"
              font_color: "#FF00FF"          # Neon magenta

          # BOTTOM LEFT - Resolution Stack
          - default: resolution
            template_variables:
              horizontal_align: left
              vertical_align: bottom
              horizontal_offset: 15
              vertical_offset: 55
              back_color: "#1a1a2eDD"
              font_color: "#E0E0E0"
              use_edition: true              # Show Director's Cut, etc.

          # BOTTOM LEFT - HDR Format (stacked below resolution)
          - default: video_format
            template_variables:
              horizontal_align: left
              vertical_align: bottom
              horizontal_offset: 15
              vertical_offset: 15
              back_color: "#1a1a2eDD"
              font_color: "#FFD700"          # Gold for HDR/DV

          # BOTTOM RIGHT - Award Ribbons
          - default: ribbon
            template_variables:
              horizontal_align: right
              vertical_align: bottom
              back_color: "#1a1a2eEE"

          # BOTTOM RIGHT - Audio (offset from ribbon)
          - default: audio_codec
            template_variables:
              horizontal_align: right
              vertical_align: bottom
              horizontal_offset: 15
              vertical_offset: 55
              back_color: "#1a1a2eDD"
              font_color: "#FF1493"          # Hot pink for Atmos/DTS:X

      TV Shows:
        # Hide collections from library view - only show in Collections tab
        collection_mode: hide
        collection_files:
          # ═══════════════════════════════════════════════════════════
          # CHARTS & RANKINGS
          # ═══════════════════════════════════════════════════════════
          - default: basic
          - default: imdb
          - default: trakt
          - default: flixpatrol

          # ═══════════════════════════════════════════════════════════
          # STREAMING SERVICES
          # ═══════════════════════════════════════════════════════════
          - default: streaming

          # ═══════════════════════════════════════════════════════════
          # AWARDS
          # ═══════════════════════════════════════════════════════════
          - default: emmy
          - default: golden_globes

          # ═══════════════════════════════════════════════════════════
          # STUDIOS / NETWORKS
          # ═══════════════════════════════════════════════════════════
          - default: network
            template_variables:
              include:
                - HBO
                - Netflix
                - Apple TV+
                - Prime Video
                - Hulu
                - Showtime
                - FX
                - AMC
                - BBC One
                - Peacock

          # ═══════════════════════════════════════════════════════════
          # CONTENT ORGANIZATION
          # ═══════════════════════════════════════════════════════════
          - default: genre
          - default: decade
          - default: franchise
          - default: resolution

          # ═══════════════════════════════════════════════════════════
          # CURATED (Trakt)
          # ═══════════════════════════════════════════════════════════
          - default: trakt_popular
          - default: trakt_trending

        overlay_files:
          # ╔════════════════════════════════════════╗
          # ║  TV SHOW OVERLAY LAYOUT                ║
          # ║  ┌──────────────────────────────┐      ║
          # ║  │ [● AIRING]         [IMDB 8.5]│      ║
          # ║  │                              │      ║
          # ║  │                              │      ║
          # ║  │ [1080p]            [RIBBON]  │      ║
          # ║  │               [NETWORK LOGO] │      ║
          # ║  └──────────────────────────────┘      ║
          # ╚════════════════════════════════════════╝

          # TOP LEFT - Show Status (All states, synthwave colors)
          - default: status
            template_variables:
              horizontal_align: left
              vertical_align: top
              horizontal_offset: 15
              vertical_offset: 15
              back_radius: 8
              # Airing Now - Neon green pulse
              text_airing: "● AIRING"
              back_color_airing: "#00FF0099"
              font_color_airing: "#FFFFFF"
              # Returning Soon - Cyan
              text_returning: "↻ RETURNING"
              back_color_returning: "#00FFFFAA"
              font_color_returning: "#1a1a2e"
              # Ended (Completed) - Purple
              text_ended: "✓ ENDED"
              back_color_ended: "#8B00FFAA"
              font_color_ended: "#FFFFFF"
              # Canceled - Red warning
              text_canceled: "✗ CANCELED"
              back_color_canceled: "#FF0000CC"
              font_color_canceled: "#FFFFFF"

          # TOP RIGHT - IMDb Rating
          - default: ratings
            template_variables:
              rating1: user
              rating1_image: imdb
              horizontal_align: right
              vertical_align: top
              horizontal_offset: 15
              vertical_offset: 15
              back_color: "#1a1a2e"
              back_width: 105
              back_height: 40
              back_radius: 8
              font_color: "#00FFFF"

          # BOTTOM LEFT - Resolution
          - default: resolution
            template_variables:
              horizontal_align: left
              vertical_align: bottom
              horizontal_offset: 15
              vertical_offset: 15
              back_color: "#1a1a2eDD"
              back_radius: 8
              font_color: "#E0E0E0"

          # BOTTOM RIGHT - Award Ribbons
          - default: ribbon
            template_variables:
              horizontal_align: right
              vertical_align: bottom
              back_color: "#1a1a2eEE"

          # BOTTOM RIGHT - Network Logo (offset above ribbon)
          - default: network
            template_variables:
              horizontal_align: right
              vertical_align: bottom
              horizontal_offset: 15
              vertical_offset: 55
              back_color: "#1a1a2eCC"
              back_radius: 8

    settings:
      cache: true
      cache_expiration: 60
      asset_directory: /config/assets
      asset_folders: true
      create_asset_folders: false
      sync_mode: sync
      minimum_items: 1
      delete_below_minimum: true
      delete_not_scheduled: false
      run_again_delay: 2
      missing_only_released: false
      only_filter_missing: false
      show_missing: true
      save_report: true
      tvdb_language: eng
      item_refresh_delay: 0
      playlist_sync_to_users: all

    plex:
      url: http://plex.media.svc.cluster.local:32400
      token: <<PLEX_TOKEN>>

    tmdb:
      apikey: <<TMDB_APIKEY>>
      language: en
      region: US
      cache_expiration: 60

    trakt:
      client_id: <<TRAKT_CLIENT_ID>>
      client_secret: <<TRAKT_CLIENT_SECRET>>
      pin:  # Will be set via OAuth flow
      authorization:  # Auto-populated after OAuth
