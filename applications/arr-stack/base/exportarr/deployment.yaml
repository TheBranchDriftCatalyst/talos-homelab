---
# Exportarr for Prowlarr
apiVersion: apps/v1
kind: Deployment
metadata:
  name: exportarr-prowlarr
  labels:
    app: exportarr-prowlarr
spec:
  replicas: 1
  selector:
    matchLabels:
      app: exportarr-prowlarr
  template:
    metadata:
      labels:
        app: exportarr-prowlarr
    spec:
      containers:
        - name: exportarr
          image: ghcr.io/onedr0p/exportarr:v2.0.1
          args: ['prowlarr']
          env:
            - name: URL
              value: 'http://prowlarr:9696'
            - name: APIKEY
              value: 'placeholder' # Will be configured after first setup
            - name: PORT
              value: '9707'
          ports:
            - name: metrics
              containerPort: 9707
          resources:
            requests:
              cpu: 10m
              memory: 32Mi
---
# Exportarr for Sonarr
apiVersion: apps/v1
kind: Deployment
metadata:
  name: exportarr-sonarr
  labels:
    app: exportarr-sonarr
spec:
  replicas: 1
  selector:
    matchLabels:
      app: exportarr-sonarr
  template:
    metadata:
      labels:
        app: exportarr-sonarr
    spec:
      containers:
        - name: exportarr
          image: ghcr.io/onedr0p/exportarr:v2.0.1
          args: ['sonarr']
          env:
            - name: URL
              value: 'http://sonarr:8989'
            - name: APIKEY
              value: 'placeholder'
            - name: PORT
              value: '9707'
          ports:
            - name: metrics
              containerPort: 9707
          resources:
            requests:
              cpu: 10m
              memory: 32Mi
---
# Exportarr for Radarr
apiVersion: apps/v1
kind: Deployment
metadata:
  name: exportarr-radarr
  labels:
    app: exportarr-radarr
spec:
  replicas: 1
  selector:
    matchLabels:
      app: exportarr-radarr
  template:
    metadata:
      labels:
        app: exportarr-radarr
    spec:
      containers:
        - name: exportarr
          image: ghcr.io/onedr0p/exportarr:v2.0.1
          args: ['radarr']
          env:
            - name: URL
              value: 'http://radarr:7878'
            - name: APIKEY
              value: 'placeholder'
            - name: PORT
              value: '9707'
          ports:
            - name: metrics
              containerPort: 9707
          resources:
            requests:
              cpu: 10m
              memory: 32Mi
---
# Exportarr for Readarr
apiVersion: apps/v1
kind: Deployment
metadata:
  name: exportarr-readarr
  labels:
    app: exportarr-readarr
spec:
  replicas: 1
  selector:
    matchLabels:
      app: exportarr-readarr
  template:
    metadata:
      labels:
        app: exportarr-readarr
    spec:
      containers:
        - name: exportarr
          image: ghcr.io/onedr0p/exportarr:v2.0.1
          args: ['readarr']
          env:
            - name: URL
              value: 'http://readarr:8787'
            - name: APIKEY
              value: 'placeholder'
            - name: PORT
              value: '9707'
          ports:
            - name: metrics
              containerPort: 9707
          resources:
            requests:
              cpu: 10m
              memory: 32Mi