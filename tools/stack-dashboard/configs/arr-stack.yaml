# ARR Stack Dashboard Configuration
# This file defines the services, credentials, and display settings for the arr-stack dashboard

name: arr-stack
display_name: ARR Stack
namespace: media-prod
domain: talos00
refresh_interval: 10.0

banner: |
  █████  ██████  ██████       ███████ ████████  █████   ██████ ██   ██
  ██   ██ ██   ██ ██   ██      ██         ██    ██   ██ ██      ██  ██
  ███████ ██████  ██████  █████ ███████    ██    ███████ ██      █████
  ██   ██ ██   ██ ██   ██           ██    ██    ██   ██ ██      ██  ██
  ██   ██ ██   ██ ██   ██      ███████    ██    ██   ██  ██████ ██   ██
                       ⚡ Media Automation Stack ⚡

groups:
  - name: indexer
    display_name: Indexer & Management
    icon: "▸"
    services:
      - name: prowlarr
        display_name: Prowlarr
        description: Indexer Manager
        credential:
          name: prowlarr
          display_name: Prowlarr
          type: api_key
          source: config_xml
          config_path: /config/config.xml
          xml_tag: ApiKey

  - name: media-automation
    display_name: Media Automation
    icon: "▸"
    services:
      - name: sonarr
        display_name: Sonarr
        description: TV Shows
        credential:
          name: sonarr
          display_name: Sonarr
          type: api_key
          source: config_xml
          config_path: /config/config.xml
          xml_tag: ApiKey

      - name: radarr
        display_name: Radarr
        description: Movies
        credential:
          name: radarr
          display_name: Radarr
          type: api_key
          source: config_xml
          config_path: /config/config.xml
          xml_tag: ApiKey

      - name: readarr
        display_name: Readarr
        description: Books
        optional: true
        credential:
          name: readarr
          display_name: Readarr
          type: api_key
          source: config_xml
          config_path: /config/config.xml
          xml_tag: ApiKey

      - name: overseerr
        display_name: Overseerr
        description: Request Management
        credential:
          name: overseerr
          display_name: Overseerr
          type: api_key
          source: config_json
          config_path: /config/settings.json
          json_path: main.apiKey

  - name: media-servers
    display_name: Media Servers
    icon: "▸"
    services:
      - name: plex
        display_name: Plex
        description: Plex Media Server
        credential:
          name: plex
          display_name: Plex
          type: token
          source: preferences_xml
          config_path: /config/Library/Application Support/Plex Media Server/Preferences.xml
          xml_attribute: PlexOnlineToken

      - name: jellyfin
        display_name: Jellyfin
        description: Jellyfin Media Server
        credential:
          name: jellyfin
          display_name: Jellyfin
          type: api_key
          source: secret
          secret_name: homepage-secrets
          secret_key: HOMEPAGE_VAR_JELLYFIN_KEY

      - name: tdarr
        display_name: Tdarr
        description: Transcoding Service
        credential:
          name: tdarr
          display_name: Tdarr
          type: api_key
          source: config_json
          config_path: /app/configs/Tdarr_Server_Config.json
          json_path: seededApiKey

  - name: infrastructure
    display_name: Infrastructure
    icon: "▸"
    services:
      - name: postgresql
        display_name: PostgreSQL
        description: PostgreSQL Database
        credential:
          name: postgresql
          display_name: PostgreSQL
          type: userpass
          source: secret
          secret_name: postgresql-secret
          static_username: postgres
          password_key: postgres-password

      - name: homepage
        display_name: Homepage
        description: Dashboard
        optional: true

  - name: monitoring
    display_name: Monitoring
    icon: "▸"
    services:
      - name: exportarr
        display_name: Exportarr
        description: Metrics Exporter
        optional: true

global_credentials:
  - name: grafana
    display_name: Grafana
    type: userpass
    source: secret
    secret_name: homepage-secrets
    username_key: HOMEPAGE_VAR_GRAFANA_USER
    password_key: HOMEPAGE_VAR_GRAFANA_PASS

  - name: argocd
    display_name: ArgoCD
    type: api_key
    source: secret
    secret_name: homepage-secrets
    secret_key: HOMEPAGE_VAR_ARGOCD_KEY
